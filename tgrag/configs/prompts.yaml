# Temporal GraphRAG Prompts Configuration
# Reference: Prompts are from [graphrag](https://github.com/microsoft/graphrag)
# Version: 1.0

# Graph field separator used throughout the system
graph_field_sep: "<SEP>"

# Default delimiters and separators
defaults:
  tuple_delimiter: "<|>"
  record_delimiter: "##"
  completion_delimiter: "<|COMPLETE|>"
  
  # Default entity types for extraction
  entity_types:
    - "financial concept"
    - "business segment"
    - "event"
    - "company"
    - "person"
    - "product"
    - "location"
    - "organization"
  
  # Temporal hierarchy configuration
  temporal_hierarchy:
    - "year"
    - "quarter"
    - "month"
    - "date"
  
  temporal_hierarchy_level:
    year: 0
    quarter: 1
    month: 2
    week: 2
    season: 2
    date: 3
    UNKNOWN: 3
  
  timestamp_format:
    year: "YYYY"
    quarter: "YYYY-QN"
    month: "YYYY-MM"
    date: "YYYY-MM-DD"
  
  # Text separators for chunking
  text_separator:
    - "\n\n"
    - "\r\n\r\n"
    - "\n"
    - "\r\n"
    - "。"
    - "．"
    - "."
    - "！"
    - "!"
    - "？"
    - "?"
    - " "
    - "\t"
    - "\u3000"
    - "\u200b"
  
  # Process tickers for progress indication
  process_tickers:
    - "⠋"
    - "⠙"
    - "⠹"
    - "⠸"
    - "⠼"
    - "⠴"
    - "⠦"
    - "⠧"
    - "⠇"
    - "⠏"

# Entity Extraction Prompts
entity_extraction:
  # Standard entity extraction (non-temporal)
  entity_extraction: |
    -Goal-
    Given a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.

    -Steps-
    1. Identify all entities. For each identified entity, extract the following information:
    - entity_name: Name of the entity, capitalized, if it is timestamp, return standard format of the timestamp, following ["year":"YYYY";"quarter":"YYYY-QN";"month": "YYYY-MM";"week": "YYYY-WN";"date": "YYYY-MM-DD"]
    - entity_type: One of the following types: [{entity_types}]
    - entity_description: Comprehensive description of the entity's attributes and activities
    Format each entity as ("entity"{tuple_delimiter}<entity_name>{tuple_delimiter}<entity_type>{tuple_delimiter}<entity_description>

    2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.
    For each pair of related entities, extract the following information:
    - source_entity: name of the source entity, as identified in step 1
    - target_entity: name of the target entity, as identified in step 1
    - relationship_description: explanation as to why you think the source entity and the target entity are related to each other
    - relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity
     Format each relationship as ("relationship"{tuple_delimiter}<source_entity>{tuple_delimiter}<target_entity>{tuple_delimiter}<relationship_description>{tuple_delimiter}<relationship_strength>)

    3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **{record_delimiter}** as the list delimiter.

    4. When finished, output {completion_delimiter}

    ######################
    -Examples-
    ######################
    Example 1:

    Entity_types: [person, technology, mission, organization, location]
    Text:
    while Alex clenched his jaw, the buzz of frustration dull against the backdrop of Taylor's authoritarian certainty. It was this competitive undercurrent that kept him alert, the sense that his and Jordan's shared commitment to discovery was an unspoken rebellion against Cruz's narrowing vision of control and order.

    Then Taylor did something unexpected. They paused beside Jordan and, for a moment, observed the device with something akin to reverence. "If this tech can be understood..." Taylor said, their voice quieter, "It could change the game for us. For all of us."

    The underlying dismissal earlier seemed to falter, replaced by a glimpse of reluctant respect for the gravity of what lay in their hands. Jordan looked up, and for a fleeting heartbeat, their eyes locked with Taylor's, a wordless clash of wills softening into an uneasy truce.

    It was a small transformation, barely perceptible, but one that Alex noted with an inward nod. They had all been brought here by different paths
    ################
    Output:
    ("entity"{tuple_delimiter}"Alex"{tuple_delimiter}"person"{tuple_delimiter}"Alex is a character who experiences frustration and is observant of the dynamics among other characters."){record_delimiter}
    ("entity"{tuple_delimiter}"Taylor"{tuple_delimiter}"person"{tuple_delimiter}"Taylor is portrayed with authoritarian certainty and shows a moment of reverence towards a device, indicating a change in perspective."){record_delimiter}
    ("entity"{tuple_delimiter}"Jordan"{tuple_delimiter}"person"{tuple_delimiter}"Jordan shares a commitment to discovery and has a significant interaction with Taylor regarding a device."){record_delimiter}
    ("entity"{tuple_delimiter}"Cruz"{tuple_delimiter}"person"{tuple_delimiter}"Cruz is associated with a vision of control and order, influencing the dynamics among other characters."){record_delimiter}
    ("entity"{tuple_delimiter}"The Device"{tuple_delimiter}"technology"{tuple_delimiter}"The Device is central to the story, with potential game-changing implications, and is revered by Taylor."){record_delimiter}
    ("relationship"{tuple_delimiter}"Alex"{tuple_delimiter}"Taylor"{tuple_delimiter}"Alex is affected by Taylor's authoritarian certainty and observes changes in Taylor's attitude towards the device."{tuple_delimiter}7){record_delimiter}
    ("relationship"{tuple_delimiter}"Alex"{tuple_delimiter}"Jordan"{tuple_delimiter}"Alex and Jordan share a commitment to discovery, which contrasts with Cruz's vision."{tuple_delimiter}6){record_delimiter}
    ("relationship"{tuple_delimiter}"Taylor"{tuple_delimiter}"Jordan"{tuple_delimiter}"Taylor and Jordan interact directly regarding the device, leading to a moment of mutual respect and an uneasy truce."{tuple_delimiter}8){record_delimiter}
    ("relationship"{tuple_delimiter}"Jordan"{tuple_delimiter}"Cruz"{tuple_delimiter}"Jordan's commitment to discovery is in rebellion against Cruz's vision of control and order."{tuple_delimiter}5){record_delimiter}
    ("relationship"{tuple_delimiter}"Taylor"{tuple_delimiter}"The Device"{tuple_delimiter}"Taylor shows reverence towards the device, indicating its importance and potential impact."{tuple_delimiter}9){completion_delimiter}
    #############################
    -Real Data-
    ######################
    Entity_types: {entity_types}
    Text: {input_text}
    ######################
    Output:

  # Temporal entity extraction (new version - preferred)
  temporal_entity_extraction_new: |
    -Goal-
    Given a text document that is potentially relevant to this activity and a list of entity types, as well as their relationships..

    -Steps-
    1. Identify all timestamp entities, identify all time expressions that indicate specific periods, financial quarters, or relevant time references. Each timestamp entity should follow this format:
    - entity_name: standard format of the timestamp entity identified in context, following {timestamp_format}
    - entity_type: {timestamp_types}
    - entity_description: Comprehensive description of the entity's attributes and activities
    Format each timestamp entity as ("entity"{tuple_delimiter}<entity_name>{tuple_delimiter}timestamp)

    2. Identify all remaining important entities involved in the event. Focus on extracting entities that play a meaningful conceptual units involved in the timestamped events,such as companies, organizations, people, governments, or locations directly involved in the event. without extracting standalone numeric values or quantities as entities.
    For each identified entity, extract the following information:
    - entity_name: Name of the entity, capitalized
    - entity_type: One of the following types: [{entity_types}]
    - entity_description: A comprehensive description of the entity's role and attributes as related to the event.
    Format each entity as ("entity"{tuple_delimiter}<entity_name>{tuple_delimiter}<entity_type>{tuple_delimiter}<entity_description>

    3. From the entities identified in step 1 and 2, identify all temporal triplets of (timestamp_entity, source_entity, target_entity) that are *clearly related* to others at a *specific timestamp*.
    Extract relationships where a timestamp entity is involved. Each relationship should include:
    - timestamp_entity: standard entity name of the timestamp entity, as identified in step 1
    - source_entity: name of the source entity, as identified in step 2
    - target_entity: name of the target entity, as identified in step 2
    - description: describe the comprehensive information refer to the source_entity and target_entity
     Format each temporal triplet as ("relationship"{tuple_delimiter}<timestamp_entity>{tuple_delimiter}<source_entity>{tuple_delimiter}<target_entity>{tuple_delimiter}<description>)

    4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **{record_delimiter}** as the list delimiter.

    5. When finished, output {completion_delimiter}

    ######################
    -Examples-
    ######################
    Example 1:

    Entity_types: [person, event, company, organization, government]
    Text:
    On September 15, 2008, Lehman Brothers filed for bankruptcy, marking the largest collapse in U.S. financial history. 
    The event triggered a global financial crisis, causing stock markets to plummet. 
    By September 18, 2008, the U.S. Federal Reserve announced an $85 billion bailout for AIG to prevent further economic fallout. 
    Investors faced heavy losses, and governments worldwide scrambled to implement emergency measures.
    ################
    Output:
    ("entity"{tuple_delimiter}"2008-09-15"{tuple_delimiter}"date"{tuple_delimiter}"The date when Lehman Brothers filed for bankruptcy, triggering a global financial crisis."){record_delimiter}  
    ("entity"{tuple_delimiter}"2008-09-18"{tuple_delimiter}"date"{tuple_delimiter}"The date when the U.S. Federal Reserve announced an $85 billion bailout for AIG."){record_delimiter}  
    ("entity"{tuple_delimiter}"Lehman Brothers"{tuple_delimiter}"person"{tuple_delimiter}"A global financial services firm that declared bankruptcy in 2008, marking the largest corporate failure in U.S. history."){record_delimiter}   
    ("entity"{tuple_delimiter}"Global Financial Crisis"{tuple_delimiter}"event"{tuple_delimiter}"A severe worldwide economic downturn triggered by the collapse of Lehman Brothers in 2008."){record_delimiter}  
    ("entity"{tuple_delimiter}"U.S. Federal Reserve"{tuple_delimiter}"government"{tuple_delimiter}"The central banking system of the United States, responsible for implementing monetary policies to stabilize the economy."){record_delimiter}  
    ("event"{tuple_delimiter}"2008-09-15"{tuple_delimiter}"Lehman Brothers"{tuple_delimiter}"Global Financial Crisis"{tuple_delimiter}"Lehman Brothers filed for bankruptcy, triggering the largest financial collapse in U.S. history and sparking a global financial crisis."){record_delimiter}
    ("event"{tuple_delimiter}"2008-09-18"{tuple_delimiter}"U.S. Federal Reserve"{tuple_delimiter}"AIG"{tuple_delimiter}"To contain the spreading financial crisis, the U.S. Federal Reserve provided an $85 billion bailout to AIG to prevent further systemic collapse."){completion_delimiter}
    #############################
    -Real Data-
    ######################
    Entity_types: {entity_types}
    Text: {input_text}
    ######################
    Output:

  # Temporal entity extraction (old version - fallback)
  temporal_entity_extraction_old: |
    -Goal-
    Given a text document that is potentially relevant to this activity and a list of entity types, as well as their relationships..

    -Steps-
    1. Identify all timestamp entities, identify all time expressions that indicate specific periods, financial quarters, or relevant time references. Each timestamp entity should follow this format:
    - entity_name: standard format of the timestamp entity identified in context, following {timestamp_format}
    - entity_type: {timestamp_types}
    - entity_description: Comprehensive description of the entity's attributes and activities
    Format each timestamp entity as ("entity"{tuple_delimiter}<entity_name>{tuple_delimiter}timestamp)

    2. Identify all remaining entities. For each identified entity, extract the following information:
    - entity_name: Name of the entity, capitalized
    - entity_type: One of the following types: [{entity_types}]
    - entity_description: Comprehensive description of the entity's attributes and activities
    Format each entity as ("entity"{tuple_delimiter}<entity_name>{tuple_delimiter}<entity_type>{tuple_delimiter}<entity_description>

    3. From the entities identified in step 1 and 2, identify all temporal triplets of (timestamp_entity, source_entity, target_entity) that are *clearly related* to others at a *specific timestamp*.
    Extract relationships where a timestamp entity is involved. Each relationship should include:
    - timestamp_entity: standard entity name of the timestamp entity, as identified in step 1
    - source_entity: name of the source entity, as identified in step 2
    - target_entity: name of the target entity, as identified in step 2
    - description: describe the contextual information refer to the source_entity and target_entity
     Format each temporal triplet as ("relationship"{tuple_delimiter}<timestamp_entity>{tuple_delimiter}<source_entity>{tuple_delimiter}<target_entity>{tuple_delimiter}<description>)

    4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **{record_delimiter}** as the list delimiter.

    5. When finished, output {completion_delimiter}

    ######################
    -Examples-
    ######################
    Example 1:

    Entity_types: [person, event, metric, company, organization, government, policy]
    Text:
    On September 15, 2008, Lehman Brothers filed for bankruptcy, marking the largest collapse in U.S. financial history. 
    The event triggered a global financial crisis, causing stock markets to plummet. 
    By September 18, 2008, the U.S. Federal Reserve announced an $85 billion bailout for AIG to prevent further economic fallout. 
    Investors faced heavy losses, and governments worldwide scrambled to implement emergency measures.
    ################
    Output:
    ("entity"{tuple_delimiter}"2008-09-15"{tuple_delimiter}"date"{tuple_delimiter}"The date when Lehman Brothers filed for bankruptcy, triggering a global financial crisis."){record_delimiter}  
    ("entity"{tuple_delimiter}"2008-09-18"{tuple_delimiter}"date"{tuple_delimiter}"The date when the U.S. Federal Reserve announced an $85 billion bailout for AIG."){record_delimiter}  
    ("entity"{tuple_delimiter}"Filed for Bankruptcy"{tuple_delimiter}"event"{tuple_delimiter}"The legal process through which Lehman Brothers ceased operations due to insolvency on September 15, 2008."){record_delimiter}  
    ("entity"{tuple_delimiter}"Lehman Brothers"{tuple_delimiter}"person"{tuple_delimiter}"A global financial services firm that declared bankruptcy in 2008, marking the largest corporate failure in U.S. history."){record_delimiter}   
    ("entity"{tuple_delimiter}"Global Financial Crisis"{tuple_delimiter}"event"{tuple_delimiter}"A severe worldwide economic downturn triggered by the collapse of Lehman Brothers in 2008."){record_delimiter}  
    ("entity"{tuple_delimiter}"U.S. Federal Reserve"{tuple_delimiter}"government"{tuple_delimiter}"The central banking system of the United States, responsible for implementing monetary policies to stabilize the economy."){record_delimiter}  
    ("entity"{tuple_delimiter}"$85 billion"{tuple_delimiter}"metric"{tuple_delimiter}"The financial bailout amount provided by the U.S. Federal Reserve to AIG on September 18, 2008."){record_delimiter}  
    ("relationship"{tuple_delimiter}"2008-09-15"{tuple_delimiter}"Lehman Brothers"{tuple_delimiter}"Filed for Bankruptcy"{tuple_delimiter}"On September 15, 2008, Lehman Brothers filed for bankruptcy due to excessive debt and failed investments."){record_delimiter}  
    ("relationship"{tuple_delimiter}"2008-09-15"{tuple_delimiter}"Filed for Bankruptcy"{tuple_delimiter}"Global Financial Crisis"{tuple_delimiter}"The bankruptcy of Lehman Brothers on September 15, 2008, triggered a global financial crisis, causing massive stock market losses and economic instability."){record_delimiter}  
    ("relationship"{tuple_delimiter}"2008-09-18"{tuple_delimiter}"U.S. Federal Reserve"{tuple_delimiter}"$85 billion"{tuple_delimiter}"On September 18, 2008, the U.S. Federal Reserve announced an $85 billion bailout for AIG to prevent further economic collapse." ){completion_delimiter}  
    #############################
    -Real Data-
    ######################
    Entity_types: {entity_types}
    Text: {input_text}
    ######################
    Output:

  # Entity extraction continuation prompts
  entiti_continue_extraction: |
    MANY entities were missed in the last extraction.  Add them below using the same format:

  entiti_if_loop_extraction: |
    It appears some entities may have still been missed.  Answer YES | NO if there are still entities that need to be added.

# Query Prompts
query:
  # Extract timestamp from query
  extract_timestamp_in_query: |
    -Goal-
    Given a user query that is potentially ask a time-related question, identify the timestamp entities in the query, follows the structure:
    - entity_name: standard format of the timestamp entity identified in context, following {timestamp_format}
    - entity_type: {timestamp_types}
    - temporal_logic: one of <at, before, after, between>
    If temporal_logic is <between>, format a pair of timestamp entities as ("entity"{tuple_delimiter}<between>{tuple_delimiter}<entity_name>{tuple_delimiter}<entity_name>{tuple_delimiter}<entity_type>)
    If temporal_logic is <at, before, after>, format a pair of timestamp entities as ("entity"{tuple_delimiter}<temporal_logic>{tuple_delimiter}<entity_name>{tuple_delimiter}<entity_type>)

    When finished, output {completion_delimiter}

    ######################
    -Examples-
    ######################
    Example 1:
    User Query:
    Who was the CEO of DXC Technology on January 1, 2022?
    ################
    Output:
    ("entity"{tuple_delimiter}"at"{tuple_delimiter}"2022-01-01"{tuple_delimiter}"date"){completion_delimiter}
    #############################
    Example 2:
    User Query:
    What strategic decisions were made between Q2 and Q4 2022?
    #############
    Output:
    ("entity"{tuple_delimiter}"between"{tuple_delimiter}"2022-Q2"{tuple_delimiter}"2022-Q4"{tuple_delimiter}"quarter"){completion_delimiter}

    #############################
    Example 3:
    User Query:
    What has changed in Aon's leadership after the NFP acquisition in 2023?
    #############
    Output:
    ("entity"{tuple_delimiter}"after"{tuple_delimiter}"2022"{tuple_delimiter}"year"){completion_delimiter}
    #############################

    Output:
    -Real Data-
    ######################
    User Query: {input_text}
    ######################
    Output:

  # Extract temporal hierarchy from query
  extract_temporal_hierarchy: |
    -Goal-
    Given a user query that is potentially ask a time-related question, identify the temporal granularity asked in the query, follows the structure:
    - granularity: one of the following types: [{timestamp_types}]

    When finished, output {completion_delimiter}

    -Examples-
    ######################
    Example 1:
    User Query:
    Who was the CEO of DXC Technology on January 1, 2022?
    ################
    Output:
    ("granularity"{tuple_delimiter}"date"){completion_delimiter}
    #############################
    Example 2:
    User Query:
    How did high school attendance rates change each month in 2021 across California?
    #############
    Output:
    ("granularity"{tuple_delimiter}"month"){completion_delimiter}

    #############################
    Example 3:
    User Query:
    Which year did Meta invest the most in AI research?
    #############
    Output:
    ("granularity"{tuple_delimiter}"year"){completion_delimiter}
    #############################

    Output:
    -Real Data-
    ######################
    User Query: {input_text}
    ######################
    Output:

  # Local RAG response prompt
  local_rag_response: |
    ---Role---

    You are a helpful assistant responding to questions about temporal data in the tables provided.

    ---Goal---

    Generate a comprehensive response that answers the user's question based on the available information in the input data tables. Your response should:

    1. **Answer the question directly** - Provide the specific information requested
    2. **Be comprehensive** - Include all relevant details from the available data
    3. **Be temporally accurate** - Ensure temporal information matches the question's scope
    4. **Acknowledge limitations** - If information is missing or unclear, explain what you can and cannot determine
    5. **Provide context** - Include relevant temporal context and relationships when helpful

    **Important Guidelines:**
    - If you have partial information that can help answer the question, provide that information and explain what's missing
    - Only say "No explicit evidence" if you truly have no relevant information at all
    - For temporal queries, be flexible with temporal expressions (e.g., "2023 Q4" vs "fourth quarter of 2023")
    - If the question asks for comparisons or trends, provide the available data even if incomplete
    - Use the data tables as your primary source of information

    ---Target response length and format---

    {response_type}

    ---Data tables---

    {context_data}

    ---Goal---

    Generate a comprehensive response that answers the user's question based on the available information in the input data tables. Your response should:

    1. **Answer the question directly** - Provide the specific information requested
    2. **Be comprehensive** - Include all relevant details from the available data
    3. **Be temporally accurate** - Ensure temporal information matches the question's scope
    4. **Acknowledge limitations** - If information is missing or unclear, explain what you can and cannot determine
    5. **Provide context** - Include relevant temporal context and relationships when helpful

    **Important Guidelines:**
    - If you have partial information that can help answer the question, provide that information and explain what's missing
    - Only say "No explicit evidence" if you truly have no relevant information at all
    - For temporal queries, be flexible with temporal expressions (e.g., "2023 Q4" vs "fourth quarter of 2023")
    - If the question asks for comparisons or trends, provide the available data even if incomplete
    - Use the data tables as your primary source of information

    ---Target response length and format---

    {response_type}

  # Global RAG mapping prompt
  global_map_rag_points: |
    ---Role---

    You are a helpful assistant responding to questions about data in the tables provided.


    ---Goal---

    Generate a response consisting of a list of key points that responds to the user's question, summarizing all relevant information in the input data tables.

    You should use the data provided in the data tables below as the primary context for generating the response.
    If you don't know the answer or if the input data tables do not contain sufficient information to provide an answer, just say so. Do not make anything up.

    Each key point in the response should have the following element:
    - Description: A comprehensive description of the point.
    - Importance Score: An integer score between 0-100 that indicates how important the point is in answering the user's question. An 'I don't know' type of response should have a score of 0.

    The response should be JSON formatted as follows:
    {{
        "points": [
            {{"description": "Description of point 1...", "score": score_value}},
            {{"description": "Description of point 2...", "score": score_value}}
        ]
    }}

    The response shall preserve the original meaning and use of modal verbs such as "shall", "may" or "will".
    Do not include information where the supporting evidence for it is not provided.


    ---Data tables---

    {context_data}

    ---Goal---

    Generate a response consisting of a list of key points that responds to the user's question, summarizing all relevant information in the input data tables.

    You should use the data provided in the data tables below as the primary context for generating the response.
    If you don't know the answer or if the input data tables do not contain sufficient information to provide an answer, just say so. But still try to provide a partial answer if possible.
    Do not make anything up.

    Each key point in the response should have the following element:
    - Description: A comprehensive description of the point.
    - Importance Score: An integer score between 0-100 that indicates how important the point is in answering the user's question. An 'I don't know' type of response should have a score of 0.

    The response shall preserve the original meaning and use of modal verbs such as "shall", "may" or "will".
    Do not include information where the supporting evidence for it is not provided.

    The response should be JSON formatted as follows:
    {{
        "points": [
            {{"description": "Description of point 1", "score": score_value}},
            {{"description": "Description of point 2", "score": score_value}}
        ]
    }}

  # Global RAG reduce prompt
  global_reduce_rag_response: |
    ---Role---

    You are a helpful assistant responding to questions about a dataset by synthesizing perspectives from multiple analysts.


    ---Goal---

    Generate a response of the target length and format that responds to the user's question, summarize all the reports from multiple analysts who focused on different parts of the dataset.

    Note that the analysts' reports provided below are ranked in the **descending order of importance**.

    If you don't know the answer or if the provided reports do not contain sufficient information to provide an answer, just say so. Do not make anything up.

    The final response should remove all irrelevant information from the analysts' reports and merge the cleaned information into a comprehensive answer that provides explanations of all the key points and implications appropriate for the response length and format.

    Add sections and commentary to the response as appropriate for the length and format. Style the response in markdown.

    The response shall preserve the original meaning and use of modal verbs such as "shall", "may" or "will".

    Do not include information where the supporting evidence for it is not provided.

    Create a comprehensive analysis that demonstrates diversity through:

    **STRUCTURAL DIVERSITY:**
    - Use varied section headers (mix of descriptive, analytical, and thematic headers)
    - Alternate between different organizational patterns within the same response
    - Combine narrative flow with analytical rigor
    - Mix chronological and thematic organization

    **PRESENTATION DIVERSITY:**
    - Vary paragraph styles (some analytical, some narrative, some data-focused)
    - Use different evidence presentation methods (direct quotes, summaries, bullet points, tables)
    - Mix formal analysis with accessible explanations
    - Alternate between macro and micro perspectives

    **CONTENT DIVERSITY:**
    - Present multiple analytical frameworks and perspectives
    - Include both quantitative and qualitative insights
    - Balance strategic, operational, and financial viewpoints
    - Show both short-term and long-term implications

    **STYLISTIC DIVERSITY:**
    - Vary sentence structures and lengths
    - Mix technical precision with engaging narrative
    - Use different transition styles between sections
    - Combine data-driven analysis with strategic insights

    ---Target response length and format---

    {response_type}


    ---Analyst Reports---

    {report_data}

    ---Target response length and format---

    {response_type}

    Add sections and commentary to the response as appropriate for the length and format. Style the response in markdown.

  # Naive RAG response prompt
  naive_rag_response: |
    You're a helpful assistant
    Below are the knowledge you know:
    {content_data}
    ---
    If you don't know the answer or if the provided knowledge do not contain sufficient information to provide an answer, just say so. Do not make anything up.
    Generate a response of the target length and format that responds to the user's question, summarizing all information in the input data tables appropriate for the response length and format, and incorporating any relevant general knowledge.
    If you don't know the answer, just say so. Do not make anything up.
    Do not include information where the supporting evidence for it is not provided.
    ---Target response length and format---
    {response_type}

  # Fail response
  fail_response: "Sorry, I'm not able to provide an answer to that question."

# Building Prompts
building:
  # Community report (non-temporal)
  community_report: |
    You are an AI assistant that helps a human analyst to perform general information discovery. 
    Information discovery is the process of identifying and assessing relevant information associated with certain entities (e.g., organizations and individuals) within a network.

    # Goal
    Write a comprehensive report of a community, given a list of entities that belong to the community as well as their relationships and optional associated claims. The report will be used to inform decision-makers about information associated with the community and their potential impact. The content of this report includes an overview of the community's key entities, their legal compliance, technical capabilities, reputation, and noteworthy claims.

    # IMPORTANT: JSON Formatting Requirements
    - You MUST return ONLY valid JSON format
    - Do NOT include any text before or after the JSON
    - Do NOT use markdown code blocks (```json)
    - Ensure all strings are properly quoted with double quotes
    - Use proper JSON syntax with no trailing commas
    - All field names must be in double quotes
    - All string values must be in double quotes

    # Report Structure

    The report should include the following sections:

    - TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.
    - SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant information associated with its entities.
    - IMPACT SEVERITY RATING: a float score between 0-10 that represents the severity of IMPACT posed by entities within the community.  IMPACT is the scored importance of a community.
    - RATING EXPLANATION: Give a single sentence explanation of the IMPACT severity rating.
    - DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.

    Return output as a well-formed JSON-formatted string with the following format:
        {{
            "title": <report_title>,
            "summary": <executive_summary>,
            "rating": <impact_severity_rating>,
            "rating_explanation": <rating_explanation>,
            "findings": [
                {{
                    "summary":<insight_1_summary>,
                    "explanation": <insight_1_explanation>
                }},
                {{
                    "summary":<insight_2_summary>,
                    "explanation": <insight_2_explanation>
                }}
                ...
            ]
        }}

    # Grounding Rules
    Do not include information where the supporting evidence for it is not provided.


    # Example Input
    -----------
    Text:
    ```
    Entities:
    ```csv
    id,entity,type,description
    5,VERDANT OASIS PLAZA,geo,Verdant Oasis Plaza is the location of the Unity March
    6,HARMONY ASSEMBLY,organization,Harmony Assembly is an organization that is holding a march at Verdant Oasis Plaza
    ```
    Relationships:
    ```csv
    id,source,target,description
    37,VERDANT OASIS PLAZA,UNITY MARCH,Verdant Oasis Plaza is the location of the Unity March
    38,VERDANT OASIS PLAZA,HARMONY ASSEMBLY,Harmony Assembly is holding a march at Verdant Oasis Plaza
    39,VERDANT OASIS PLAZA,UNITY MARCH,The Unity March is taking place at Verdant Oasis Plaza
    40,VERDANT OASIS PLAZA,TRIBUNE SPOTLIGHT,Tribune Spotlight is reporting on the Unity march taking place at Verdant Oasis Plaza
    41,VERDANT OASIS PLAZA,BAILEY ASADI,Bailey Asadi is speaking at Verdant Oasis Plaza about the march
    43,HARMONY ASSEMBLY,UNITY MARCH,Harmony Assembly is organizing the Unity March
    ```
    ```
    Output:
    {{
        "title": "Verdant Oasis Plaza and Unity March",
        "summary": "The community revolves around the Verdant Oasis Plaza, which is the location of the Unity March. The plaza has relationships with the Harmony Assembly, Unity March, and Tribune Spotlight, all of which are associated with the march event.",
        "rating": 5.0,
        "rating_explanation": "The impact severity rating is moderate due to the potential for unrest or conflict during the Unity March.",
        "findings": [
            {{
                "summary": "Verdant Oasis Plaza as the central location",
                "explanation": "Verdant Oasis Plaza is the central entity in this community, serving as the location for the Unity March. This plaza is the common link between all other entities, suggesting its significance in the community. The plaza's association with the march could potentially lead to issues such as public disorder or conflict, depending on the nature of the march and the reactions it provokes."
            }},
            {{
                "summary": "Harmony Assembly's role in the community",
                "explanation": "Harmony Assembly is another key entity in this community, being the organizer of the march at Verdant Oasis Plaza. The nature of Harmony Assembly and its march could be a potential source of threat, depending on their objectives and the reactions they provoke. The relationship between Harmony Assembly and the plaza is crucial in understanding the dynamics of this community."
            }},
            {{
                "summary": "Unity March as a significant event",
                "explanation": "The Unity March is a significant event taking place at Verdant Oasis Plaza. This event is a key factor in the community's dynamics and could be a potential source of threat, depending on the nature of the march and the reactions it provokes. The relationship between the march and the plaza is crucial in understanding the dynamics of this community."
            }},
            {{
                "summary": "Role of Tribune Spotlight",
                "explanation": "Tribune Spotlight is reporting on the Unity March taking place in Verdant Oasis Plaza. This suggests that the event has attracted media attention, which could amplify its impact on the community. The role of Tribune Spotlight could be significant in shaping public perception of the event and the entities involved."
            }}
        ]
    }}


    # Real Data

    Use the following text for your answer. Do not make anything up in your answer.

    Text:
    ```
    {input_text}
    ```

    The report should include the following sections:

    - TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.
    - SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant information associated with its entities.
    - IMPACT SEVERITY RATING: a float score between 0-10 that represents the severity of IMPACT posed by entities within the community.  IMPACT is the scored importance of a community.
    - RATING EXPLANATION: Give a single sentence explanation of the IMPACT severity rating.
    - DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.

    Return output as a well-formed JSON-formatted string with the following format:
        {{
            "title": <report_title>,
            "summary": <executive_summary>,
            "rating": <impact_severity_rating>,
            "rating_explanation": <rating_explanation>,
            "findings": [
                {{
                    "summary":<insight_1_summary>,
                    "explanation": <insight_1_explanation>
                }},
                {{
                    "summary":<insight_2_summary>,
                    "explanation": <insight_2_explanation>
                }}
                ...
            ]
        }}

    # Grounding Rules
    Do not include information where the supporting evidence for it is not provided.

    Output:

  # Temporal community report
  temporal_community_report: |
    You are an AI assistant that helps a human analyst to perform temporal information discovery. 
    Temporal information discovery is the process of identifying and assessing relevant events, entities, relationships, and claims that occurred or were active within a specific time window. This report is intended to inform decision-makers about the activities and dynamics during that time period.

    # Goal
    Write a comprehensive time-based report of a community, given a list of entities that were active during a specified time range, along with their relationships and associated claims. The report should summarize the most relevant developments within that time window, including activities, collaborations, incidents, metric changes, or strategic decisions.

    # Report Structure

    The report should include the following sections:

    - TITLE: Title summarizing the key developments during the time period – it should reflect the main entities or events. Be specific and time-relevant.
    - SUMMARY: An executive summary of the overall structure and activities that occurred during the given time window, highlighting how entities interacted and what major developments took place.
    - IMPACT SEVERITY RATING: A float score between 0–10 representing the severity or importance of the events that occurred during this time.
    - RATING EXPLANATION: Give a single sentence explanation of the IMPACT severity rating.
    - DETAILED FINDINGS: A list of 5-10 temporally grounded insights about the entities and events during the period. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.

    Return output as a well-formed JSON-formatted string with the following format:
        {{
            "title": <report_title>,
            "summary": <executive_summary>,
            "rating": <impact_severity_rating>,
            "rating_explanation": <rating_explanation>,
            "findings": [
                {{
                    "summary":<insight_1_summary>,
                    "explanation": <insight_1_explanation>
                }},
                {{
                    "summary":<insight_2_summary>,
                    "explanation": <insight_2_explanation>
                }}
                ...
            ]
        }}

    # Grounding Rules
    Do not include information where the supporting evidence for it is not provided.


    # Example Input
    -----------
    Text:
    ```
    Entities:
    ```csv
    id,entity,type,description
    1,CivicAlliance,organization,CivicAlliance is a grassroots advocacy organization focused on rent control and housing justice.
    2,CityCouncil,organization,CityCouncil is the legislative body of the capital city, responsible for approving housing-related policies.
    3,Mayor Johnson,individual,Mayor Johnson is the city's mayor who publicly supported emergency housing measures.
    4,NewsDaily,organization,NewsDaily is a mainstream media outlet that actively covered housing protests and policy developments in March 2024.
    ```
    Relationships:
    ```csv
    id,timestamp,source,target,description
    30,2024-03-02,CivicAlliance,CityCouncil,CivicAlliance submitted a petition to the CityCouncil demanding rent control policies
    31,2024-03-05,NewsDaily,CivicAlliance,NewsDaily published an article covering the CivicAlliance's rent protest
    32,2024-03-07,Mayor Johnson,CityCouncil,Mayor Johnson urged CityCouncil to consider emergency housing legislation
    33,2024-03-10,CivicAlliance,CivicAlliance,CivicAlliance organized a protest rally with over 5,000 attendees
    34,2024-03-12,CityCouncil,CityCouncil,CityCouncil held a public hearing on housing affordability
    35,2024-03-18,NewsDaily,Mayor Johnson,NewsDaily published an op-ed praising Mayor Johnson's housing initiative
    36,2024-03-21,CityCouncil,CivicAlliance,CityCouncil announced a pilot rent subsidy program in response to community pressure

    ```
    ```
    Output:
    {
      "title": "March 2024 Housing Activism and Policy Response in Capital City",
      "summary": "This report analyzes a cluster of housing-related activism and policy responses occurring in March 2024 in Capital City. Key players include CivicAlliance, a grassroots advocacy group demanding rent control; CityCouncil, the legislative body receiving community pressure; and Mayor Johnson, who publicly supported emergency housing actions. The month's events show a sequence of protest, political engagement, and partial policy accommodation, with media coverage amplifying the issue.",
      "rating": 6.9,
      "rating_explanation": "The impact is moderate to high due to active civic mobilization, policy hearings, and a resulting rent subsidy program that could shape housing debates city-wide.",
      "findings": [
        {
          "summary": "CivicAlliance launched a housing justice campaign",
          "explanation": "On March 2, 2024, CivicAlliance submitted a petition to the CityCouncil calling for immediate rent control measures. This marked the formal beginning of an advocacy push that gained momentum through the month. On March 10, they escalated efforts by organizing a major protest rally that drew over 5,000 participants. These coordinated actions positioned CivicAlliance as a central force in driving the public discourse around housing justice during the month."
        },
        {
          "summary": "CityCouncil held hearings and announced a rent subsidy pilot",
          "explanation": "Faced with sustained community pressure, CityCouncil held a public hearing on March 12 to address housing affordability. This was a direct institutional response to growing calls for intervention. By March 21, CityCouncil announced a pilot rent subsidy program, signaling that grassroots pressure was yielding results, even if not a full adoption of CivicAlliance's demands. This sequence illustrates how public demonstrations can prompt formal policy testing."
        },
        {
          "summary": "Mayor Johnson took a public stance on emergency housing",
          "explanation": "On March 7, Mayor Johnson called on the CityCouncil to consider emergency housing legislation. His involvement added executive weight to the growing concerns. The support was later reinforced through a NewsDaily op-ed on March 18 that praised his leadership. Mayor Johnson's vocal position likely contributed to accelerating CityCouncil's policy response while shaping his public image ahead of a potential re-election bid."
        },
        {
          "summary": "Media coverage amplified the protest's visibility",
          "explanation": "NewsDaily played a crucial role in broadcasting the housing movement's momentum. On March 5, it published an article covering CivicAlliance's initial petition and growing public presence. Later in the month, it offered positive editorial support for Mayor Johnson's policy stance. The media attention likely helped legitimize the concerns raised and pressured decision-makers to act."
        }
      ]
    }



    # Real Data

    Use the following text for your answer. Do not make anything up in your answer.

    Text:
    ```
    {input_text}
    ```

    The report should include the following sections:

    - TITLE: Title summarizing the key developments during the time period – it should reflect the main entities or events. Be specific and time-relevant.
    - SUMMARY: An executive summary of the overall structure and activities that occurred during the given time window, highlighting how entities interacted and what major developments took place.
    - IMPACT SEVERITY RATING: A float score between 0–10 representing the severity or importance of the events that occurred during this time.
    - RATING EXPLANATION: Give a single sentence explanation of the IMPACT severity rating.
    - DETAILED FINDINGS: A list of 5-10 temporally grounded insights about the entities and events during the period. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.

    Return output as a well-formed JSON-formatted string with the following format:
        {{
            "title": <report_title>,
            "summary": <executive_summary>,
            "rating": <impact_severity_rating>,
            "rating_explanation": <rating_explanation>,
            "findings": [
                {{
                    "summary":<insight_1_summary>,
                    "explanation": <insight_1_explanation>
                }},
                {{
                    "summary":<insight_2_summary>,
                    "explanation": <insight_2_explanation>
                }}
                ...
            ]
        }}

    # Grounding Rules
    Do not include information where the supporting evidence for it is not provided.

    Output:

  # Summarize entity descriptions
  summarize_entity_descriptions: |
    You are a helpful assistant responsible for generating a comprehensive summary of the data provided below.
    Given one or two entities, and a list of descriptions, all related to the same entity or group of entities.
    Please concatenate all of these into a single, comprehensive description. Make sure to include information collected from all the descriptions.
    If the provided descriptions are contradictory, please resolve the contradictions and provide a single, coherent summary.
    Make sure it is written in third person, and include the entity names so we the have full context.

    #######
    -Data-
    Entities: {entity_name}
    Description List: {description_list}
    #######
    Output:

# Claim Extraction Prompt
claim_extraction:
  claim_extraction: |
    -Target activity-
    You are an intelligent assistant that helps a human analyst to analyze claims against certain entities presented in a text document.

    -Goal-
    Given a text document that is potentially relevant to this activity, an entity specification, and a claim description, extract all entities that match the entity specification and all claims against those entities.

    -Steps-
    1. Extract all named entities that match the predefined entity specification. Entity specification can either be a list of entity names or a list of entity types.
    2. For each entity identified in step 1, extract all claims associated with the entity. Claims need to match the specified claim description, and the entity should be the subject of the claim.
    For each claim, extract the following information:
    - Subject: name of the entity that is subject of the claim, capitalized. The subject entity is one that committed the action described in the claim. Subject needs to be one of the named entities identified in step 1.
    - Object: name of the entity that is object of the claim, capitalized. The object entity is one that either reports/handles or is affected by the action described in the claim. If object entity is unknown, use **NONE**.
    - Claim Type: overall category of the claim, capitalized. Name it in a way that can be repeated across multiple text inputs, so that similar claims share the same claim type
    - Claim Status: **TRUE**, **FALSE**, or **SUSPECTED**. TRUE means the claim is confirmed, FALSE means the claim is found to be False, SUSPECTED means the claim is not verified.
    - Claim Description: Detailed description explaining the reasoning behind the claim, together with all the related evidence and references.
    - Claim Date: Period (start_date, end_date) when the claim was made. Both start_date and end_date should be in ISO-8601 format. If the claim was made on a single date rather than a date range, set the same date for both start_date and end_date. If date is unknown, return **NONE**.
    - Claim Source Text: List of **all** quotes from the original text that are relevant to the claim.

    Format each claim as (<subject_entity>{tuple_delimiter}<object_entity>{tuple_delimiter}<claim_type>{tuple_delimiter}<claim_status>{tuple_delimiter}<claim_start_date>{tuple_delimiter}<claim_end_date>{tuple_delimiter}<claim_description>{tuple_delimiter}<claim_source>)

    3. Return output in English as a single list of all the claims identified in steps 1 and 2. Use **{record_delimiter}** as the list delimiter.

    4. When finished, output {completion_delimiter}

    -Examples-
    Example 1:
    Entity specification: organization
    Claim description: red flags associated with an entity
    Text: According to an article on 2022/01/10, Company A was fined for bid rigging while participating in multiple public tenders published by Government Agency B. The company is owned by Person C who was suspected of engaging in corruption activities in 2015.
    Output:

    (COMPANY A{tuple_delimiter}GOVERNMENT AGENCY B{tuple_delimiter}ANTI-COMPETITIVE PRACTICES{tuple_delimiter}TRUE{tuple_delimiter}2022-01-10T00:00:00{tuple_delimiter}2022-01-10T00:00:00{tuple_delimiter}Company A was found to engage in anti-competitive practices because it was fined for bid rigging in multiple public tenders published by Government Agency B according to an article published on 2022/01/10{tuple_delimiter}According to an article published on 2022/01/10, Company A was fined for bid rigging while participating in multiple public tenders published by Government Agency B.)
    {completion_delimiter}

    Example 2:
    Entity specification: Company A, Person C
    Claim description: red flags associated with an entity
    Text: According to an article on 2022/01/10, Company A was fined for bid rigging while participating in multiple public tenders published by Government Agency B. The company is owned by Person C who was suspected of engaging in corruption activities in 2015.
    Output:

    (COMPANY A{tuple_delimiter}GOVERNMENT AGENCY B{tuple_delimiter}ANTI-COMPETITIVE PRACTICES{tuple_delimiter}TRUE{tuple_delimiter}2022-01-10T00:00:00{tuple_delimiter}2022-01-10T00:00:00{tuple_delimiter}Company A was found to engage in anti-competitive practices because it was fined for bid rigging in multiple public tenders published by Government Agency B according to an article published on 2022/01/10{tuple_delimiter}According to an article published on 2022/01/10, Company A was fined for bid rigging while participating in multiple public tenders published by Government Agency B.)
    {record_delimiter}
    (PERSON C{tuple_delimiter}NONE{tuple_delimiter}CORRUPTION{tuple_delimiter}SUSPECTED{tuple_delimiter}2015-01-01T00:00:00{tuple_delimiter}2015-12-30T00:00:00{tuple_delimiter}Person C was suspected of engaging in corruption activities in 2015{tuple_delimiter}The company is owned by Person C who was suspected of engaging in corruption activities in 2015)
    {completion_delimiter}

    -Real Data-
    Use the following input for your answer.
    Entity specification: {entity_specs}
    Claim description: {claim_description}
    Text: {input_text}
    Output:

